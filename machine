<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Pet Value Calculator</title>

<style>
    body {
        font-family: "Times New Roman", serif;
        background: #f2f2f2;
        color: #333;
        padding: 20px;
    }

    h1 {
        text-align: center;
        color: #444;
    }

    .container {
        max-width: 700px;
        margin: auto;
        background: white;
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 6px;
    }

    label {
        font-weight: bold;
        margin-top: 10px;
        display: block;
    }

    select, input {
        width: 100%;
        padding: 8px;
        margin-top: 4px;
        font-size: 16px;
        border: 1px solid #999;
        border-radius: 4px;
    }

    .extras-box {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 6px;
        margin-top: 10px;
    }

    .result-box {
        margin-top: 20px;
        padding: 15px;
        background: #eee;
        border-radius: 6px;
        font-size: 18px;
        white-space: pre-line;
    }

    button {
        width: 100%;
        background: #555;
        color: white;
        padding: 10px;
        margin-top: 20px;
        font-size: 18px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

    button:hover {
        background: #333;
    }
</style>
</head>

<body>

<h1>Pet Value Calculator</h1>

<div class="container">

    <!-- CATEGORY -->
    <label>Category</label>
    <select id="category">
        <option>Redstone(4)</option>
        <option>Redstone(2)</option>
        <option>Redstone</option>
        <option>Greystone</option>
        <option>Battle</option>
        <option>Premium</option>
        <option>Seasonal</option>
        <option>Orphan</option>
        <option>Quest/Award</option>
        <option>Main</option>
        <option>Stray</option>
    </select>

    <!-- GENERATION -->
    <label>Generation (e.g., 1 = G1)</label>
    <input type="number" id="generation" value="1">

    <!-- AGE -->
    <label>Age (months)</label>
    <input type="number" id="age" value="1">

    <!-- POPULATION -->
    <label>Population</label>
    <input type="number" id="population" value="100">

    <!-- EXTRAS -->
    <label>Extras (select all that apply)</label>
    <div class="extras-box">
        <label><input type="checkbox" value="Ethereal" class="extra"> Ethereal</label>
        <label><input type="checkbox" value="Event" class="extra"> Event</label>
        <label><input type="checkbox" value="Elder" class="extra"> Elder</label>
        <label><input type="checkbox" value="Painted" class="extra"> Painted</label>
        <label><input type="checkbox" value="Glitched" class="extra"> Glitched</label>
        <label><input type="checkbox" value="Rare" class="extra"> Rare</label>
        <label><input type="checkbox" value="AllCarrier" class="extra"> AllCarrier</label>
        <label><input type="checkbox" value="Effect" class="extra"> Effect</label>
        <label><input type="checkbox" value="Manual" class="extra"> Manual</label>
        <label><input type="checkbox" value="Parentless" class="extra"> Parentless</label>
        <label><input type="checkbox" value="BreedOnly" class="extra"> BreedOnly</label>
        <label><input type="checkbox" value="Unbreedable" class="extra"> Unbreedable</label>
    </div>

    <button onclick="runCalculator()">Calculate</button>

    <div id="results" class="result-box"></div>

</div>

<script>
// ===============================
//  BASE COSTS
// ===============================
const CATEGORY_BASE_COSTS = {
    "Redstone(4)": 3200000,
    "Redstone(2)": 1600000,
    "Redstone": 800000,
    "Greystone": 600000,
    "Battle": 200000,
    "Premium": 100000,
    "Seasonal": 100000,
    "Orphan": 30000,
    "Quest/Award": 20000,
    "Main": 5000,
    "Stray": 4000
};

// ===============================
//  EXTRAS
// ===============================
const EXTRA_EFFECTS = {
    "Ethereal":    v => v * 5 + 5000000,
    "Event":       v => v * 3 + 3000000,
    "Elder":       v => v * 2.5 + 2000000,
    "Painted":     v => v + 500000,
    "Glitched":    v => v + 250000,
    "Rare":        v => v + 80000,
    "AllCarrier":  v => v * 2,
    "Effect":      v => v * 1.5,
    "Manual":      v => v * 1.25,
    "Parentless":  v => v * 1.15,
    "BreedOnly":   v => v * 1.13,
    "Unbreedable": v => v * 1.08
};

// ===============================
//  CALCULATOR
// ===============================
function calculateValue({ category, generation, ageMonths, population, extras }) {

    const baseCost = CATEGORY_BASE_COSTS[category] || 0;

    // GENERATION
    let genModifier;
    if (generation >= 1) genModifier = 1 / Math.pow(2, generation - 1);
    else genModifier = 0.25; // g0 and negatives always 25%

    let value = baseCost * genModifier;

    // MONTHLY GROWTH (7.5%)
    const monthlyRate = 0.075;
    value *= Math.pow(1 + monthlyRate, ageMonths);

    // POPULATION
    let popModifier = 1;

    if (generation <= 0) {
        popModifier = 1;
    } else {
        if (population < 10) popModifier = 1.45;
        else if (population <= 150) popModifier = 1.35;
        else if (population <= 250) popModifier = 1.20;
        else if (population <= 500) popModifier = 1.15;
        else if (population <= 1000) popModifier = 1.075;
        else if (population <= 10000) popModifier = 1.05;
        else if (population <= 100000) popModifier = 1.025;
        else if (population <= 200000) popModifier = 1.01;
        else popModifier = 1.005;

        if (generation > 1 && !extras.includes("BreedOnly")) {
            const reductionFactor = -0.55;
            popModifier = 1 + ((popModifier - 1) * reductionFactor);
        }
    }

    value *= popModifier;

    // EXTRAS
    let extraTotal = 0;
    extras.forEach(e => {
        if (EXTRA_EFFECTS[e]) extraTotal += EXTRA_EFFECTS[e](value);
    });

    const finalValue = value + extraTotal;

    // SUGGESTED VALUE
    let recommendedValue;
    if (finalValue < 10000) recommendedValue = "Less than 10,000";
    else recommendedValue = (Math.round(finalValue / 10000) * 10000).toLocaleString();

    return {
        baseCost,
        generationAdjusted: Math.floor(baseCost * genModifier),
        ageAdjusted: Math.floor((baseCost * genModifier) * Math.pow(1 + monthlyRate, ageMonths)),
        populationAdjusted: Math.floor(value),
        extrasTotal: Math.floor(extraTotal),
        finalValue: Math.floor(finalValue),
        recommended: recommendedValue
    };
}

// ===============================
//  UPDATE UI
// ===============================
function runCalculator() {
    const category = document.getElementById("category").value;
    const generation = Number(document.getElementById("generation").value);
    const ageMonths = Number(document.getElementById("age").value);
    const population = Number(document.getElementById("population").value);

    const extras = [...document.querySelectorAll(".extra:checked")].map(e => e.value);

    const result = calculateValue({
        category,
        generation,
        ageMonths,
        population,
        extras
    });

    document.getElementById("results").textContent =
        `Base Value: ${result.baseCost.toLocaleString()}
Adjusted for Generation: ${result.generationAdjusted.toLocaleString()}
Adjusted for Age: ${result.ageAdjusted.toLocaleString()}
Adjusted for Population: ${result.populationAdjusted.toLocaleString()}
Extras Added: ${result.extrasTotal.toLocaleString()}

FINAL VALUE: ${result.finalValue.toLocaleString()}
Suggested Listing: ${result.recommended}`;
}
</script>

</body>
</html>
